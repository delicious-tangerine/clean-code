# `10장: 클래스`

- ## `클래스 체계`
  - 자바 관례에 따르면 변수 목록은 아래와 같다. 
  - static public 상수
  - private static 변수
  - private 변수
  - public 메소드
  - private 메소드(호출하는 공개 함수 직후에 넣기)
  - ### 캡슐화
    - 반드시 private로 해야하는 것은 아니지만, 웬~만하면 캡슐화로 구성을 해야함

- ## `클래스는 작아야 함`
  - 클래스를 만들 때는 작게 만들어야 함(**강조**)
  - 클래스의 이름은 해당 클래스의 책임을 기술해야 함(이름을 잘 지어야 클래스를 작게 구성할 수 있음)
  - 클래스 이름이 모호하면 책임이 너무 많아서이다.(여러 개의 책임을 하고 있으니 클래스 이름이 모호해지는..)
  - ### 단일 책임 원칙
    - 클래스나 모듈을 변경할 이유가 하나, 단 하나뿐이어야 한다는 원칙
    - 변경할 이유를 파악하려다 보면 코드를 추상화하기도 쉬워짐
    - 대다수(나..)가 `깨끗하고 체계적인 소프트웨어` 보다 `돌아가는 소프트웨어`에 초점을 맞춘다.
    - 관심사를 역할에 맞게 잘 쪼개놓아야 좋음. 즉, 큰 클래스 몇 개가 아니라 작은 클래스 여럿으로 이뤄진 시스템이 더 바람직하다.

- ## `응집도`
  - 메소드마다 인스턴스 변수를 많이 사용하면 할 수록 응집도가 높은 클래스임
  - 응집도가 높은건 바람직 하지 않지만, 우리는 이러한 코드를 자주 짜게 됨
  ```java
  public class Stack {
    private int topOfStack = 0;
    List<Stack> elements = new LinkedList<Integer>();

    public int size() {
      return topOfStack;
    }

    public void push(int element) {
      topOfStack++;
      elements.add(element);
    }

    public int pop() throws PoppedWhenEmpty {
      if (topOfStack == 0) {
        throw new PoppedWhenEmpty();
      }
      int element = elements.get(--topofStack);
      elements.remove(topOfStack);
      return element;
    }
  }
  ```
  
  - 위와 같이 응집도가 높은 클래스가 있다면 변수와 메소드를 적절히 분리해 새로운 클래스 두 세개로 쪼개기

- 클래스가 응집력을 잃는다면 쪼개서 여러 클래스로 만들 수록 좋다. 

- `P179~180` 코드를 `P181~184`로 리팩토링 했다.
  1. 리팩토링한 프로그램은 좀 더 길고 서술적인 변수 이름을 사용
  2. 리팩터링한 프로그램은 코드에 주석을 추가하는 수단으로 함수 선언과 클래스 선언을 활용한다.
  3. 가독성을 높이고자 공백을 추가하고 형식을 맞추었다. 
  
- 즉, 하나에 다 때려넣지 않고 책임에 맞게 코드를 분리해서 훨씬 깔끔하고 유지보수에 좋아짐

- ## `변경하기 쉬운 클래스`
  - 잘 설계한 시스템 일수록 변경하기가 쉬워야 한다. 
  - 하나를 변경하기 위해서 두 곳 이상을 변경해야 한다면 SRP 위반임
  - 시스템을 개선하는 계기는 시스템이 변해서 여야 한다. 
  - 10-9에서 10-10으로 변경하면 코드 변경에도 용이하고 가독성도 훨씬 좋아진다.(update를 추가할 때 기존 클래스를 변경하지 않아도 된다.)
  - 이렇게 수정하면 `확장에 개방적이고 수정에 폐쇄적인 OCP도 만족할 수 있다.`

- ## `변경으로부터 격리`
  - 요구사항은 자주 변하기 때문에 코드도 자주 바뀌게 된다. 
  - 구현체에 의존하게 하는 것이 아니라 추상화된 인터페이스에 의존하게 설계를 해야 한다.
  - 실제로 책의 코드에서 Portfolio 클래스가 외부 시세 변화에 영향을 받는 코드의 예시를 들었다. 이 코드는 시세가 자주 변하기 때문에 테스트 코드를 작성하기가 쉽지 않고 두 클래스가 의존성이 커짐
  - 그래서 `StackExchange` 인터페이스를 만들어 외부 API와 연결하면 의존성도 낮아진다. 또한 인터페이스를 구현한 고정된 주가를 반환하는 임시 클래스를 만들어 테스트 코드를 작성할 수도 있다.
  - 이렇게 설계를 하면 `시스템의 결합도를 낮추어 유연성과 재사용성이 높아짐`
  