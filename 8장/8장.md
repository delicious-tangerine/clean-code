# `8장: 경계`

- ### 외부 코드 사용하기 
  - Map 인터페이스와 같은 것들은 기능과 유연성은 확실히 유용하지만 그만큼 위험도 크다. 
  - Map을 여기저기 넘기다 보면 사용하는 클라이언트가 실수로 키를 삭제할 수도 있음(ex: clear()로 전부 날릴수도..)
  - 그래서 Map 같은 인터페이스는 아래와 같이 사용하면 좋다. (여기저기 넘기지 말고, 클래스 계열 밖으로 노출하지 않도록 하는)
  ```java
  public class Sensors {
    private Map sensrot = new HashMap();

    public Sensor getById(String id) {
      return (Sensor) sensors.get(id);
    }
  }
  ```

- ### 학습 테스트는 공짜 이상이다. 
  - 학습 테스트는 패키지가 예상대로 도는지 검증한다. 
  - 패키지 작성자가 버그를 수정하고 기능도 추가하여 새로운 버전이 나올 때마다 패키지와 우리의 코드가 호환되지 않을 위험이 있다. 
  - 따라서 실제 코드와 동일한 방식으로 인터페이스를 사용하는 테스트 케이스가 필요하다. 인터페이스를 통한 경계 테스트가 있다면 패키지의 새 버전이 나와도 호환성을 유지하기 수월하다.

  
- ### 깨끗한 경계
  - 설계가 좋다면 변경하는데 많은 투자와 재작업이 필요하지 않다.
  - 통제하지 못하는 코드를 사용하면 향후 변경 비용이 너무 커지지 않게 주의해야 함.
  - `경계에 위치하는 코드는 깔끔히 분리하기`(외부 패키지는 우리가 어떻게 할 수 없으니 통제 가능한 우리 코드에 의존하기)
  - 새로운 클래스로 외부 패키지와 연결하는 경계 부분을 감싸거나 ADAPTER 패턴을 사용하면 좋다. 이러면 외부 패키지와의 의존성도 줄어들어 외부 패키지가 바꼈을 때 우리 코드의 변경할 부분이 줄어든다.